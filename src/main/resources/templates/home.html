<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.w3.org/1999/xhtml" layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>Vet System - Dashboard</title>


<style>
.testando span {
	color: purple
}

h5 {
	width: 40%;
	float: left
}

#container, #especies {
	display: none
}
</style>
</head>
<body>
	<section class="layout-content" layout:fragment="corpo">
		<div th:replace="fragments/alert :: alerta-sucesso"></div>
		<h1 class="dashboard-h">Dashboard</h1>
		<div class="dashboard-content">


			<div class="cards">
				<img th:src="@{/image/admin-icon.svg}" />
				<p>
					Total de <strong>Admins</strong> cadastrados:<br> <span
						th:text="${totaladm}"> </span>

				</p>
			</div>

			<div class="cards">
				<img th:src="@{/image/vet-icon.svg}" />
				<p>
					Total de <strong> Veterinários</strong> cadastrados:<br> <span
						th:text="${totalvet}"> </span>

				</p>
			</div>


			<div class="cards">
				<img th:src="@{/image/secretary-icon.svg}" />
				<p>
					Total de <strong>Secretárias</strong> cadastradas:<br> <span
						th:text="${totalsec}"> </span>

				</p>
			</div>

		</div>

		<div class="dashboard-content"
			th:if="${(#authorization.expression('!hasAuthority(''ADMIN'')')) 
			|| #authorization.expression('hasAuthority(''ADMIN'')') && #authorization.expression('hasAuthority(''VETERINARIO'')')  
			|| #authorization.expression('hasAuthority(''ADMIN'')') && #authorization.expression('hasAuthority(''SECRETARIA'')')}">
			<div class="cards">
				<img th:src="@{/image/paw.svg}" />
				<p>
					Total de <strong>Animais</strong> cadastrados:<br> <span
						th:text="${#lists.size(animal)}"> </span>

				</p>
			</div>


			<div class="cards">
				<img th:src="@{/image/hands-client.svg}" />
				<p>
					Total de <strong>Clientes</strong> cadastrados:<br> <span
						th:text=" ${#lists.size(cliente)}"> </span>
				</p>
			</div>

			<div class="cards">
				<img th:src="@{/image/heartbeat.svg}" />
				<p>
					Total de <strong>Internações</strong> ativas:<br> <span
						th:text=" ${#lists.size(internacao)}"> </span>
				</p>
			</div>


			<!-- <div th:each="c: ${cliente}">
				<span th:text="${c.nome}"></span>

			</div>-->
		</div>


		<div class="testando">


			<p th:if="${consultasHoje !=null}">
				<span th:if="${consultasHoje == 0}"> Você não possui
					consultas agendadas para hoje. </span> <span th:if="${consultasHoje > 0}"
					th:text="'Você possui um total de ' + ${consultasHoje} + ' consultas agendadas para hoje.'"></span>
			</p>
			<p th:if="${consultasHojeSec !=null}">
				<span
					th:text="${consultasHojeSec} + ' consultas estão agendadas para hoje.'"></span>
			</p>


			<p>
				<span th:if="${consultasSemana !=null}"
					th:text="'Essa semana possui um total de ' + ${consultasSemana} + ' consultas agendadas.'"></span>
			</p>

		</div>

		<fieldset>
			<form>

				<legend> Filtros </legend>
				<div>
					<input type="checkbox" id="ck-racas" nome="interesse"> <label
						for="ck-racas"> Raças </label>
				</div>
				<div>
					<input type="checkbox" id="ck-especies" name="interesse"> <label
						for="ck-especies"> Espécies </label>
				</div>
			</form>
		</fieldset>

		<div id="container"></div>
		<div id="especies"></div>
	</section>
	<script th:src="@{/js/home.js(v=${version})}" th:fragment="js"></script>
	<script th:inline="javascript" th:fragment="inlinescript">
	$(document).ready(function(){
		$("#ck-racas").on('change', function(){
			if($(this).is(':checked')){
				$("#container").slideToggle();
			}else{
				$("#container").slideToggle();
			}
			
		})
		$("#ck-especies").on('change', function(){
			if($(this).is(':checked')){
				$("#especies").slideToggle();
			}else{
				$("#especies").slideToggle();
			}
			
		})
			
		
	});
	$(function(){
		    Highcharts.chart('container', {
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: 'Pacientes por raça'
		        },
		    
		        xAxis: {
		            categories: [[${surveyMap.keySet()}]],
		            crosshair: true
		        },
		        yAxis: {
		            min: 0,
		            max:50,
		            title: {
		                text: 'Quantidade de pacientes'
		            }
		        },
		        tooltip: {
		            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
		            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
		            '<td style="padding:0"><b>{point.y:1f}</b></td></tr>',
		            footerFormat: '</table>',
		            shared: true,
		            useHTML: true
		        },
		        plotOptions: {
		            column: {
		                pointPadding: 0.2,
		                borderWidth: 0
		            }
		        },
		        series: [{
		            name: 'Pacientes ',
		            data: [[${surveyMap.values()}]]
		        }]
		    });
		    });
	$(function(){
	    Highcharts.chart('especies', {
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Pacientes por espécie'
	        },
	    
	        xAxis: {
	            categories: [[${especies.keySet()}]],
	            crosshair: true
	        },
	        yAxis: {
	            min: 0,
	            max:50,
	            title: {
	                text: 'Quantidade de pacientes'
	            }
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	            '<td style="padding:0"><b>{point.y:1f}</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0
	            }
	        },
	        series: [{
	            name: 'Pacientes ',
	            data: [[${especies.values()}]]
	        }]
	    });
	    });
	</script>


</body>
</html>